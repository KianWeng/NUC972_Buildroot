#!/bin/sh

TAG="FTP"
ARGS="-0 -1 -4 -A -B -C 8 -c 7 -D -E -H -I 10 -j -l puredb:/etc/pureftpd.pdb -s -z -Z"
start() {
    #pure-ftpd -l puredb:/etc/pureftpd.pdb &
    logger -t ${TAG} -s "Starting pureftpd: "
    start-stop-daemon -S -q -p /var/run/pureftpd.pid \
    --exec /usr/sbin/pure-ftpd -- $ARGS
    [ $? = 0 ] && logger -t ${TAG} -s "OK" || logger -t ${TAG} -s "FAIL"
}

case "$1" in
    start)
        start
        ;;
    stop)
	logger -t ${TAG} -s "Stopping pureftpd: "
	start-stop-daemon -K -q -p /var/run/pureftpd.pid
	[ $? = 0 ] && logger -t ${TAG} -s "OK" || logger -t ${TAG} -s "FAIL"
	;;
    *)
        echo "Usage: /etc/init.d/S50pureftpd {start|stop}"
        exit 1
        ;;
esac

exit 0

